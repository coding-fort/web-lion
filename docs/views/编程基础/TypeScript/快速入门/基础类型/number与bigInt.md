# Number 与 BigInt 类型

在 TypeScript 中，`number` 和 `BigInt` 是两种用于表示数值的类型。尽管它们都可以表示数字，但两者之间存在重要的区别，特别是在精度、范围和操作符支持方面。理解这些差异对于编写高效且无误的代码至关重要。

## Number 类型

`number` 类型是 JavaScript 中最常用的数值类型，它基于 IEEE 754 标准中的双精度浮点数格式。这意味着它可以表示整数和小数，并且提供了广泛的数学运算支持。

### 特性

- **精度**：`number` 类型可以精确表示从 `-2^53 + 1` 到 `2^53 - 1` 范围内的整数（即 ±9,007,199,254,740,991）。超出此范围的整数可能会失去精度。
- **范围**：理论上，`number` 类型的最大值为 `Number.MAX_SAFE_INTEGER`（即 2^53 - 1），最小值为 `Number.MIN_SAFE_INTEGER`（即 -(2^53 - 1)）。此外，还存在 `Infinity` 和 `-Infinity` 表示无限大或无限小的值。

- **操作符支持**：所有标准的算术运算符（如 `+`, `-`, `*`, `/`, `%`）都适用于 `number` 类型。

- **使用场景**：适用于大多数日常编程需求，包括货币计算、科学计算等，只要不涉及非常大的整数。

```typescript
let age: number = 30;
let price: number = 19.99;
```

## BigInt 类型

`BigInt` 类型是 ES2020 引入的一种新的数值类型，旨在处理任意大小的整数，而不会丢失精度。它是专门为需要高精度整数运算的应用程序设计的，例如加密算法或大规模数据分析。

### 特性

- **精度**：`BigInt` 可以表示任意大小的整数，没有精度损失。它使用后缀 `n` 来区分于 `number` 类型。

- **范围**：由于其设计初衷是为了支持任意大小的整数，因此理论上没有最大值或最小值限制。

- **操作符支持**：大部分算术运算符也适用于 `BigInt`，但是需要注意的是，不能将 `number` 和 `BigInt` 直接混合进行运算，必须先转换成相同类型。

- **使用场景**：当需要处理超出 `number` 类型安全范围的整数时，或者在对精度要求极高的场景中（如金融交易、密码学等）。

```typescript
let bigIntValue: bigint = 1234567890123456789012345678901234567890n;
```

## 区别与注意事项

| 特性       | `number`                                                               | `BigInt`                                             |
| ---------- | ---------------------------------------------------------------------- | ---------------------------------------------------- |
| 精度       | ±9,007,199,254,740,991 内精确                                          | 任意大小整数，完全精确                               |
| 范围       | 最大值为 `Number.MAX_SAFE_INTEGER`，最小值为 `Number.MIN_SAFE_INTEGER` | 没有理论上的最大值或最小值限制                       |
| 操作符支持 | 支持所有标准算术运算符                                                 | 支持大部分算术运算符，但不能直接与 `number` 混合运算 |
| 后缀       | 无                                                                     | 必须加上 `n` 后缀                                    |
| 使用场景   | 日常编程需求                                                           | 高精度整数运算，如加密算法等                         |

## 注意事项

- **性能差异**：虽然 `BigInt` 提供了更高的精度，但在某些情况下它的性能可能不如 `number` 类型好。因此，在选择使用哪种类型时应考虑性能因素。

- **互操作性问题**：由于 `BigInt` 和 `number` 之间的类型不兼容，直接混合这两种类型的值会导致编译错误。如果确实需要相互转换，可以使用 `BigInt()` 构造函数或 `Number()` 函数来进行显式转换。

  ```typescript
  const num: number = 123;
  const bigNum: bigint = BigInt(num); // 将 number 转换为 BigInt

  const bigInt: bigint = 123n;
  const numFromBigInt: number = Number(bigInt); // 将 BigInt 转换为 number
  ```

- **API 支持**：并非所有的 JavaScript API 或库都支持 `BigInt` 类型。在使用第三方库时，请确保它们能够正确处理 `BigInt` 类型的数据。

## 总结

`number` 和 `BigInt` 是 TypeScript 中两种不同的数值类型，各自具有独特的特性和适用场景。了解它们的区别有助于你在开发过程中做出正确的选择，从而编写出更加高效和准确的代码。
