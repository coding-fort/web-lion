# 选择器

CSS 选择器是用于指定应用样式的 HTML 元素的模式。CSS3 引入了多种新的和改进的选择器，使得样式设计更加灵活和强大。以下是一些主要的 CSS 选择器类型：

## 1. **元素选择器**

- 基于元素名称匹配，例如：`p { color: blue; }` 将所有段落文本颜色设置为蓝色。

## 2. **类选择器**

- 使用`.`前缀，基于 class 属性值匹配，如：`.className { color: red; }` 会选中所有带有`className`类的元素。

## 3. **ID 选择器**

- 使用`#`前缀，基于 id 属性值匹配，如：`#uniqueId { background-color: yellow; }` 只影响具有特定 ID 的元素。

## 4. **后代选择器**

- 通过空格分隔两个或更多选择器，选择第一个元素内的所有后续元素，比如：`div p { font-size: 16px; }` 选择所有位于`div`内的`p`标签。

## 5. **子选择器（Child Selector）**

- 使用`>`符号，只选择直接子元素，例如：`ul > li { list-style-type: square; }` 仅影响`ul`元素的直接`li`子元素。

## 6. **相邻兄弟选择器（Adjacent Sibling Selector）**

- 使用`+`符号，选择紧接在另一元素后的某个元素，如：`h2 + p { font-weight: bold; }` 会使紧跟在`h2`之后的第一个`p`元素加粗显示。

## 7. **通用兄弟选择器（General Sibling Selector）**

- 使用`~`符号，选择某元素后面的所有兄弟元素，如：`h2 ~ p { line-height: 1.5; }` 会影响`h2`后所有同级别的`p`元素。

## 8. **伪类选择器（Pseudo-classes）**

- 用来定义元素在其不同状态下的样式，如`:hover`, `:active`, `:focus`, `:nth-child(n)`等。例如，`a:hover { text-decoration: underline; }` 定义鼠标悬停在链接上时的下划线样式。

## 9. **伪元素选择器（Pseudo-elements）**

- 用来给元素的部分内容添加样式，如`::before`, `::after`, `::first-line`, `::first-letter`等。例如，`p::first-letter { font-size: 200%; }` 可以增大段落首字母的大小。

## 10. **属性选择器**

- 根据元素的属性和属性值来选择元素，包括：
  - `[attribute]`：存在指定属性的元素。
  - `[attribute=value]`：属性值完全等于指定值的元素。
  - `[attribute~=value]`：属性值包含指定词的元素。
  - `[attribute|=value]`：属性值以指定词开头的元素。
  - `[attribute^=value]`：属性值以指定字符串开头的元素。
  - `[attribute$=value]`：属性值以指定字符串结尾的元素。
  - `[attribute*=value]`：属性值包含指定字符串的元素。

## 11. **权重**

在 CSS 中，选择器权重决定了当多个规则应用于同一个 HTML 元素时，哪个样式会被优先应用。权重是根据选择器的类型来计算的，并且可以理解为一个层级系统。以下是 CSS 选择器权重的基本规则：

### 权重等级

1. **内联样式**：直接写在 HTML 元素的`style`属性中的样式具有最高的优先级。权重值可表示为`1,0,0,0`。
2. **ID 选择器**：使用`#idName`的形式指定样式，权重值为`0,1,0,0`。

3. **类选择器、伪类和属性选择器**：

   - 类选择器（`.className`）
   - 伪类（`:hover`, `:nth-child()`, 等）
   - 属性选择器（`[type="text"]`）
     这些选择器的权重值为`0,0,1,0`。

4. **元素选择器和伪元素**：

   - 元素选择器（如`div`, `p`）
   - 伪元素（如`::before`, `::after`）
     这些选择器的权重值为`0,0,0,1`。

5. **通用选择器（`*`）、组合选择器（如后代选择器、子选择器等）和其他不增加特异性的选择器**：它们的权重值为`0,0,0,0`。

### 计算示例

假设有一个样式表如下：

```css
/* 规则A */
#content article {
  color: red;
} /* 特异性: 0,1,0,1 */

/* 规则B */
.promotion {
  color: blue;
} /* 特异性: 0,0,1,0 */

/* 规则C */
article {
  color: green;
} /* 特异性: 0,0,0,1 */
```

对于以下 HTML 结构：

```html
<article id="content" class="promotion">文章内容</article>
```

- 根据选择器权重，`#content article`（规则 A）具有最高的权重（`0,1,0,1`），因此文本颜色将被设置为红色。
- 如果移除或注释掉规则 A，则`.promotion`（规则 B）将决定文本颜色（蓝色），因为它比`article`（规则 C）的权重高（`0,0,1,0` vs `0,0,0,1`）。

### 注意事项

- 当两个选择器的特异性相同时，后来的样式会覆盖前面的样式（即依据 CSS 源码中的顺序）。
- 使用`!important`声明可以覆盖常规的权重规则，但应谨慎使用，因为它可能会使调试变得更加困难。

了解如何计算和比较选择器的权重有助于解决样式冲突的问题，并确保网页按照预期显示。

这些选择器提供了强大的功能，允许开发者精确地控制网页上的每一个细节，从而创建出既美观又高效的页面布局。理解并熟练使用这些选择器可以极大提升网页设计的灵活性和效率。
